cluster:
  name: "Home AI Lab"
  location: "Trondheim, Norway"
  description: "Personal-scale GPU cluster for LLM training"
  
  queue:
    type: "redis"
    redis_host: "192.168.1.100"
    redis_port: 6379
    redis_db: 0
  
  # Master node (orchestrator)
  master:
    hostname: "gpu-master"
    ip: "192.168.1.100"
    port: 22
    user: "${USER}"  # Current user on master
  
  # Communication settings
  communication:
    backend: "c10d"  # PyTorch distributed backend
    master_port: 29500
    timeout_seconds: 300

# Worker nodes
workers:
  - name: "gpu1"
    hostname: "gpu1"
    ip: "192.168.1.101"
    user: "ob"
    ssh_port: 22
    rank: 1
    
    hardware:
      gpu_model: "RTX 4070"
      vram_gb: 8
      cpu_cores: 22
      ram_gb: 16
    
    paths:
      home: "/home/ob/"
      project: "/home/ob/Development/Tools/ugro"
      scripts: "/home/ob/Development/Tools/ugro/scripts"
  
  - name: "gpu2"
    hostname: "gpu2"
    ip: "192.168.1.102"
    user: "ollie"
    ssh_port: 22
    rank: 2
    
    hardware:
      gpu_model: "RTX 3070 Ti"
      vram_gb: 8
      cpu_cores: 16
      ram_gb: 32
    
    paths:
      home: "/home/ollie"
      project: "/home/ollie/Tools/ugro"
      scripts: "/home/ollie/Tools/ugro/scripts"

# Local paths (on master)# In your config file (pixi.toml or config.yaml)
paths:
  project_root: $HOME/Development/Tools/ugro
  scripts: $HOME/Development/Tools/ugro/scripts
  config: $HOME/Development/Tools/ugro/config
  data: $HOME/Development/Tools/ugro_data
  logs: $HOME/Development/Tools/ugro_data/logs
  experiments: $HOME/Development/Tools/ugro_data/experiments

# Training defaults
training:
  default_model: "unsloth/tinyllama-bnb-4bit"
  default_dataset: "wikitext"
  default_epochs: 1
  default_learning_rate: 0.0002
  
  batch_size_per_gpu: 1
  gradient_accumulation_steps: 8
  max_seq_length: 2048
  
  lora:
    rank: 16
    alpha: 32
    dropout: 0.05
    target_modules: ["q_proj", "v_proj"]

# Environment settings
environment:
  conda_env: "main"  # Your pixi environment name
  python_version: "3.11"
  torch_version: "2.1.0"
  cuda_version: "12.1"

# Logging
logging:
  level: "INFO"
  format: "[%(asctime)s] %(name)s - %(levelname)s - %(message)s"
  file: "$HOME/Development/Tools/ugro/logs/agent.log"
  keep_days: 7

# GitHub Webhook Configuration
webhook:
  # GitHub repository to monitor (format: owner/repo)
  repository: "ollieb89/ugro"  # Set this to your GitHub repository, e.g., "username/ugro"
  
  # Branch to monitor
  branch: "development"
  
  # Webhook secret for security (generate a strong random string)
  secret: "25b0b07ba0ece287fc1ccd92d09990d1836b3d54b45d39164521fa8ddd69cebe"  # Set this to a secure random string
  
  # Webhook server configuration
  server:
    host: "0.0.0.0"
    port: 8099
    
  # Synchronization settings
  sync:
    # Method: "rsync" (master pushes to workers) or "pull" (workers pull from GitHub)
    method: "rsync"
    
    # Files/directories to exclude from synchronization
    exclude:
      - ".git"
      - "__pycache__"
      - "*.pyc"
      - ".pytest_cache"
      - "logs/"
      - ".venv"
      - "node_modules"
      - ".DS_Store"
      - "*.log"
    
    # Timeout for synchronization operations (seconds)
    timeout: 600
